<!DOCTYPE html>
<html>

<head lang="en-us">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/style/style.css">
    <title>Josh's Blog - Data Science</title>
    <script>
        $(document).ready(function () {
            // Grab all data science posts in JSON file
            $.ajax({
                url: "./data.json", success: function (data) {

                    // Search Parameters (e.g. ?id=x)
                    x = new URLSearchParams(window.location.search)

                    // If ID is specified, show the post with that ID, else show preview of all posts
                    if (x.has("id")) {

                        // Grab the post with the same ID specified and display it
                        console.log(data.posts.find(post => post.id === x.get("id")))
                        const dsPost = data.posts.find(post => post.id === x.get("id"))
                        $("#dataScienceBody").html(dsPost.content)
                        $("#dataScienceTitle").text(dsPost.title.replace("# ", ""))
                        $("#dataScienceDate").text(dsPost.date)
                        // On hover automatically set to pointer, if on a specific post, you can't click any other posts, so set to normal cursor
                        $("#post-card").css({ cursor: "auto" })
                    }
                    else {
                        // Clear children of the #posts div
                        $("#posts").children().remove()

                        // Append each post to the end of the #posts div with preview and relevant info
                        for (let post of data.posts) {

                            $("#posts").append(`<div class="card m-5 p-md-5 p-3" id="post-card">
                                    <div class="card-title" id="dataScienceRecentTitleCard">
                                        <h3 id="dataScienceTitle">${post.title.replace("# ", "")}</h3>
                                    </div>
                                    <div class="card-subtitle" id="dataScienceDate">
                                        ${post.date}
                                    </div>
                                    <div class="card-body">
                                        <p id="dataScienceBody">${post.preview.slice(0, 297)}<b>...</b></p>
                                    </div>
                                </div>`)
                            // On each run through, last is updated to the most recent
                            // On click, send to the relevant post
                            $("#posts").children().last().on("click", function () {
                                window.location.href = "?id=" + post.id
                            })
                        }
                    }
                }
            })
        })
    </script>
    <script type="text/javascript" src="/js/time.js"></script>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark navbar-expand-md">
        <div class="container-fluid">
            <a class="navbar-brand align-bottom" href="/">
                <i class="bi bi-file-earmark-code"></i>
                Josh's Blog
            </a>
            <button class="navbar-toggler position-absolute translate-middle-x top-0 mt-2 start-50" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a href="/dataScience/" class="nav-link active">Data Science</a></li>
                    <li class="nav-item"><a href="/webDev/" class="nav-link">Web Dev</a></li>
                </ul>
            </div>
            <time id="dateTime" class="text-light position-absolute end-0 p-3 top-0"></time>
        </div>
    </nav>
    <br>
    <h1 class="text-center">Data Science Blogs</h1>
    <div id="posts">
        <div class="card m-5 p-md-5 p-3" id="post-card">
            <a href="./">
                <i class="bi bi-arrow-left text-black" title="Back" style="-webkit-text-stroke: 2px"></i>
            </a>
            <br><br>
            <div class="card-title" id="dataScienceRecentTitleCard">
                <h3 id="dataScienceTitle"></h3>
            </div>
            <div class="card-subtitle" id="dataScienceDate">

            </div>
            <div class="card-body">
                <p id="dataScienceBody"></p>
            </div>
        </div>
    </div>
</body>

</html>