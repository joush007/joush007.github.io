<!DOCTYPE html>
<html>

<head lang="en-us">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/style/style.css">
    <title>Josh's Blog - Web Dev</title>
    <script>
        $(document).ready(function () {

            $.ajax({
                url: "./web.json", success: function (data) {
                    console.log(data)

                    x = new URLSearchParams(window.location.search)

                    if (x.has("id")) {
                        console.log(data.posts.find(post => post.id === x.get("id")))
                        const wdRecent = data.posts.find(post => post.id === x.get("id"))
                        $("#webDevBody").html(wdRecent.content)
                        $("#webDevTitle").text(wdRecent.title.replace("# ", ""))
                        $("#webDevDate").text(wdRecent.date)
                        $("#post-card").css({cursor:"auto"})
                    }
                    else {
                        $("#posts").children().remove()

                        for (let post of data.posts) {

                            $("#posts").append(`<div class="card m-5 p-md-5 p-3" id="post-card">
                                <div class="card-title" id="webDevRecentTitleCard">
                                    <h3 id="webDevTitle">${post.title.replace("# ", "")}</h3>
                                </div>
                                <div class="card-subtitle" id="webDevDate">
                                    ${post.date}
                                </div>
                                <div class="card-body">
                                    <p id="webDevBody">${post.preview.slice(0, 297)}<b>...</b></p>
                                </div>
                            </div>`)
                            $("#posts").children().last().on("click", function () {
                                window.location.href = "?id=" + post.id
                            })
                        }
                    }
                }
            })

        })
    </script>
    <script type="text/javascript" src="/js/time.js"></script>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark navbar-expand-md">
        <div class="container-fluid">
            <a class="navbar-brand align-bottom" href="/">
                <i class="bi bi-file-earmark-code"></i>
                Josh's Blog
            </a>
            <button class="navbar-toggler position-absolute translate-middle-x top-0 mt-2 start-50" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a href="/dataScience/" class="nav-link">Data Science</a></li>
                    <li class="nav-item"><a href="/webDev/" class="nav-link active">Web Dev</a></li>
                </ul>
            </div>
            <time id="dateTime" class="text-light position-absolute end-0 p-3 top-0"></time>
        </div>
    </nav>
    <br>
    <h1 class="text-center">Web Dev Blogs</h1>
    <div id="posts">
        <div class="card m-5 p-md-5 p-3" id="posts">
            <div class="card-title" id="webDevRecentTitleCard">
                <h3 id="webDevTitle"></h3>
            </div>
            <div class="card-subtitle" id="webDevDate">

            </div>
            <div class="card-body">
                <p id="webDevBody"></p>
            </div>
        </div>
    </div>
</body>

</html>